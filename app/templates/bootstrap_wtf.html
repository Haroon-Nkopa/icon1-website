{% macro render_field(field) %}
  {% if field.type != 'CSRFTokenField' and field.widget.input_type != 'hidden' %}
    <div class="mb-3">
      {% if field.type not in ['BooleanField', 'SubmitField', 'RadioField'] %}
        {{ field.label(class_='form-label') }}
      {% endif %}

      {# Text input, TextArea, Select, File input, etc. #}
      {% if field.type in ['StringField', 'TextAreaField', 'PasswordField', 'EmailField', 'FileField', 'URLField', 'IntegerField', 'DecimalField', 'SelectField'] %}
        {{ field(class_='form-control') }}

      {% elif field.type == 'BooleanField' %}
        <div class="form-check">
          {{ field(class_='form-check-input') }}
          {{ field.label(class_='form-check-label') }}
        </div>

      {% elif field.type == 'RadioField' %}
        <div>
          {{ field.label }}
          {% for subfield in field %}
            <div class="form-check">
              {{ subfield(class_='form-check-input') }}
              {{ subfield.label(class_='form-check-label') }}
            </div>
          {% endfor %}
        </div>

      {% elif field.type == 'SubmitField' %}
        {{ field(class_='btn btn-primary') }}

      {% else %}
        {{ field(class_='form-control') }}
      {% endif %}

      {% if field.errors %}
        <div class="text-danger small">
          {% for error in field.errors %}
            <div>{{ error }}</div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  {% endif %}
{% endmacro %}


{% macro render_form(form, action='', method='post', class_='') %}
  <form action="{{ action }}" method="{{ method }}" class="{{ class_ }}" novalidate>
    {{ form.hidden_tag() }}
    {% for field in form %}
      {{ render_field(field) }}
    {% endfor %}
  </form>
{% endmacro %}
